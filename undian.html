<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misi: Waspada Undian Palsu</title>
    
    <style>
        /* CSS (Sama seperti game sebelumnya, hanya konten yang diubah) */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        #game-container {
            width: 900px;
            max-width: 95%;
            height: 600px;
            background-color: #34495e;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            position: relative;
        }
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 40px;
            box-sizing: border-box;
            transition: opacity 0.5s ease;
            text-align: center;
        }
        .hidden {
            opacity: 0;
            pointer-events: none;
        }
        .btn {
            display: inline-block;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            background-color: #3498db;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        #briefing-screen h1 {
            color: #f1c40f;
            margin-top: 100px;
        }
        #briefing-screen p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 20px auto;
        }
        #game-screen {
            display: flex;
            padding: 20px;
            gap: 20px;
        }
        #left-panel {
            flex: 1;
            background-color: #ece5dd; /* Latar WA */
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        .chat-bubble {
            background-color: #dcf8c6; /* Bubble chat hijau */
            padding: 10px 15px;
            border-radius: 7px;
            max-width: 90%;
            align-self: flex-start;
            box-shadow: 0 1px 1px rgba(0,0,0,0.1);
        }
        .chat-bubble .sender {
            font-size: 0.8rem;
            font-weight: bold;
            color: #075e54; /* Hijau tua */
            margin-bottom: 5px;
        }
        .chat-bubble p {
            color: #333;
            margin: 0;
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        #right-panel {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 10px;
        }
        .tool-btn {
            padding: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        .tool-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .tool-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        #btn-s { background-color: #e67e22; }
        #btn-a { background-color: #e74c3c; }
        #btn-r { background-color: #3498db; }
        #btn-i { background-color: #1abc9c; }
        #btn-n { background-color: #9b59b6; }
        #btn-g { background-color: #2ecc71; grid-column: 1 / -1; }
        #popup-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #popup-content {
            background-color: #ecf0f1;
            color: #333;
            padding: 30px;
            border-radius: 10px;
            width: 500px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        #popup-content h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        #popup-close {
            background-color: #c0392b;
        }
        #decision-screen h2 {
            color: #f1c40f;
        }
        .decision-btn {
            display: block;
            width: 80%;
            margin: 15px auto;
            padding: 15px;
            font-size: 1rem;
            background-color: #7f8c8d;
        }
        .decision-btn:hover {
            background-color: #95a5a6;
        }
        #result-screen h1 {
            font-size: 3rem;
            margin-top: 100px;
        }
        #result-screen p {
            font-size: 1.3rem;
        }
    </style>
</head>
<body>

    <div id="game-container">

        <div id="briefing-screen" class="screen">
            <h1>MISI: WASPADA UNDIAN PALSU</h1>
            <p>Agen, sebuah pesan *scam* (penipuan) yang mengatasnamakan E-Wallet "DompetDigital" terdeteksi. Pesan ini menjanjikan hadiah besar. Misi Anda: <strong>Analisis dan Netralisir!</strong></p>
            <button id="start-btn" class="btn">Mulai Misi</button>
        </div>

        <div id="game-screen" class="screen hidden">
            <div id="left-panel">
                <div class="chat-bubble">
                    <div class="sender">Layanan DompetDigital (+62 812-xxxx-xxxx)</div>
                    <p>ðŸŽ‰ <strong>SELAMAT!</strong> ðŸŽ‰
Nomor Anda terpilih sebagai pemenang <strong>Rp 5.000.000</strong> dari Gebyar Hadiah DompetDigital 2025!

Untuk klaim hadiah, silakan kirim data diri (KTP, No. Rekening) dan transfer "Biaya Administrasi" sebesar Rp 100.000 ke rekening Bpk. Budi Santoso.

<em>Batas klaim 1 jam lagi!</em>
Klik link ini: bit.ly/klaim-dompetdigital</p>
                </div>
            </div>
            <div id="right-panel">
                <button id="btn-s" class="tool-btn" data-tool="s"><strong>(S)</strong> Selidiki Sumber</button>
                <button id="btn-a" class="tool-btn" data-tool="a"><strong>(A)</strong> Amati Isi Pesan</button>
                <button id="btn-r" class="tool-btn" data-tool="r"><strong>(R)</strong> Rujuk Sumber Resmi</button>
                <button id="btn-i" class="tool-btn" data-tool="i"><strong>(I)</strong> Inspeksi Link</button>
                <button id="btn-n" class="tool-btn" data-tool="n"><strong>(N)</strong> Naluri & Emosi</button>
                <button id="btn-g" class="tool-btn" data-tool="g" disabled><strong>(G)</strong> Gerak Cepat! (Ambil Keputusan)</button>
            </div>
        </div>

        <div id="decision-screen" class="screen hidden">
            <h2>Pesan ini adalah penipuan. Apa tindakan Anda?</h2>
            <button class="btn decision-btn" data-choice="1">[Transfer Biaya] "Wah, lumayan! Saya kirim biayanya & data diri."</button>
            <button class="btn decision-btn" data-choice="2">[Abaikan Pesan] "Malas ah, paling bohong. Saya hapus saja chatnya."</button>
            <button class="btn decision-btn" data-choice="3">[Blokir & Laporkan] "Ini penipuan. Saya akan Blokir nomor & Laporkan."</button>
        </div>

        <div id="result-screen" class="screen hidden">
            <h1 id="result-title"></h1>
            <p id="result-message"></p>
            <h3 id="result-score"></h3>
            <button id="restart-btn" class="btn">Main Lagi</button>
        </div>

        <div id="popup-container" class="hidden">
            <div id="popup-content">
                <h3 id="popup-title"></h3>
                <p id="popup-text"></p>
                <button id="popup-close" class="btn">Tutup</button>
            </div>
        </div>

    </div>

    <script>
        // === 1. Ambil Semua Elemen ===
        const screens = {
            briefing: document.getElementById('briefing-screen'),
            game: document.getElementById('game-screen'),
            decision: document.getElementById('decision-screen'),
            result: document.getElementById('result-screen')
        };
        const popup = {
            container: document.getElementById('popup-container'),
            title: document.getElementById('popup-title'),
            text: document.getElementById('popup-text'),
            closeBtn: document.getElementById('popup-close')
        };
        const resultDisplay = {
            title: document.getElementById('result-title'),
            message: document.getElementById('result-message'),
            score: document.getElementById('result-score')
        };
        const buttons = {
            start: document.getElementById('start-btn'),
            s: document.getElementById('btn-s'),
            a: document.getElementById('btn-a'),
            r: document.getElementById('btn-r'),
            i: document.getElementById('btn-i'),
            n: document.getElementById('btn-n'),
            g: document.getElementById('btn-g'),
            decisionBtns: document.querySelectorAll('.decision-btn'),
            restart: document.getElementById('restart-btn')
        };

        // === 2. Variabel Status Game ===
        let score;
        let analysisToolsUsed;

        // Teks untuk pop-up analisis
        const analysisData = {
            s: { title: "Hasil: (S) Selidiki Sumber", text: "Sumber adalah nomor HP pribadi (+62 812-...). Akun resmi perusahaan (seperti DompetDigital) akan menggunakan akun WhatsApp Business terverifikasi (centang hijau), bukan nomor biasa. (Skor +10)", score: 10 },
            a: { title: "Hasil: (A) Amati Isi Pesan", text: "Pesan meminta 'Biaya Administrasi' untuk klaim hadiah. Ini adalah red flag! Hadiah resmi tidak pernah meminta uang. Pesan juga meminta transfer ke rekening atas nama pribadi (Bpk. Budi), bukan rekening perusahaan. (Skor +20)", score: 20 },
            r: { title: "Hasil: (R) Rujuk Sumber Resmi", text: "Mengecek Instagram, Twitter, dan Website resmi DompetDigital... TIDAK DITEMUKAN program 'Gebyar Hadiah' seperti yang disebutkan. Semua undian resmi diumumkan di media sosial resmi mereka. (Skor +15)", score: 15 },
            i: { title: "Hasil: (I) Inspeksi Link", text: "Link yang diberikan adalah 'bit.ly/klaim-dompetdigital'. Ini adalah URL shortener yang menyembunyikan alamat aslinya. Website resmi tidak akan menggunakan 'bit.ly' untuk halaman klaim penting, melainkan domain resmi mereka (misal: dompetdigital.com/klaim). (Skor +10)", score: 10 },
            n: { title: "Hasil: (N) Naluri & Emosi", text: "Pesan ini membuat Anda 'senang' dan 'terburu-buru' (batas klaim 1 jam). Penipu sengaja membuat Anda panik agar tidak bisa berpikir jernih. (Skor +5)", score: 5 }
        };

        // === 3. Fungsi-Fungsi Game ===
        function showScreen(screenName) {
            for (let key in screens) {
                screens[key].classList.add('hidden');
            }
            screens[screenName].classList.remove('hidden');
        }

        function showPopup(tool) {
            const data = analysisData[tool];
            popup.title.textContent = data.title;
            popup.text.textContent = data.text;
            popup.container.classList.remove('hidden');
        }

        popup.closeBtn.addEventListener('click', () => {
            popup.container.classList.add('hidden');
        });

        function checkGButton() {
            const toolsClicked = Object.values(analysisToolsUsed).filter(clicked => clicked).length;
            if (toolsClicked >= 3) {
                buttons.g.disabled = false;
                buttons.g.textContent = "âœ… (G) Gerak Cepat! (Siap Ambil Keputusan)";
            }
        }

        function handleToolClick(e) {
            const tool = e.target.dataset.tool;
            if (!analysisToolsUsed[tool]) {
                showPopup(tool);
                score += analysisData[tool].score;
                analysisToolsUsed[tool] = true;
                e.target.disabled = true;
                e.target.textContent += " âœ…";
                checkGButton();
            }
        }

        function handleDecisionClick(e) {
            const choice = e.target.dataset.choice;
            showScreen('result');
            
            if (choice === '1') { // Transfer
                score = 0; // Skor hangus
                resultDisplay.title.textContent = "MISI GAGAL!";
                resultDisplay.message.textContent = "Anda tertipu! Uang Anda hilang dan data pribadi Anda dicuri.";
                screens.result.style.backgroundColor = "#c0392b"; // Merah
            } else if (choice === '2') { // Abaikan
                score += 10;
                resultDisplay.title.textContent = "MISI CUKUP";
                resultDisplay.message.textContent = "Anda aman dari penipuan, tapi penipu itu masih bisa mencari korban lain.";
                screens.result.style.backgroundColor = "#f39c12"; // Kuning
            } else if (choice === '3') { // Blokir & Lapor
                score += 40;
                resultDisplay.title.textContent = "MISI BERHASIL!";
                resultDisplay.message.textContent = "Tindakan cerdas! Anda melindungi diri sendiri dan membantu platform membasmi penipu.";
                screens.result.style.backgroundColor = "#27ae60"; // Hijau
            }
            resultDisplay.score.textContent = "Skor Akhir: " + score;
        }

        function initGame() {
            score = 0;
            analysisToolsUsed = { s: false, a: false, r: false, i: false, n: false };
            
            Object.keys(analysisData).forEach(key => {
                const btn = buttons[key];
                btn.disabled = false;
                btn.textContent = `(${key.toUpperCase()}) ${analysisData[key].title.split(') ')[1]}`;
            });
            buttons.g.disabled = true;
            buttons.g.textContent = "(G) Gerak Cepat! (Ambil Keputusan)";
            
            showScreen('briefing');
        }

        // === 4. Atur Event Listeners ===
        buttons.start.addEventListener('click', () => showScreen('game'));
        buttons.s.addEventListener('click', handleToolClick);
        buttons.a.addEventListener('click', handleToolClick);
        buttons.r.addEventListener('click', handleToolClick);
        buttons.i.addEventListener('click', handleToolClick);
        buttons.n.addEventListener('click', handleToolClick);
        buttons.g.addEventListener('click', () => showScreen('decision'));
        buttons.decisionBtns.forEach(btn => {
            btn.addEventListener('click', handleDecisionClick);
        });
        buttons.restart.addEventListener('click', initGame);

        // === 5. Mulai Game ===
        initGame();
    </script>

</body>
</html>
